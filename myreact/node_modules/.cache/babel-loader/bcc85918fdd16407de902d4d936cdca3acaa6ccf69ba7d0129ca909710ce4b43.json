{"ast":null,"code":"import _toConsumableArray from\"/Users/jangyoungju/Desktop/webproject/homework/project/myreact/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/jangyoungju/Desktop/webproject/homework/project/myreact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Route,Routes,useNavigate,useParams}from'react-router-dom';import{useState,useEffect}from'react';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Mypage(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),writer=_useState2[0],setWriter=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todo=_useState4[0],setTodo=_useState4[1];useEffect(function(){fetchTodo();},[]);useEffect(function(){fetchUserData();},[]);var fetchTodo=function fetchTodo(){axios.get('http://localhost:8000/add').then(function(res){setTodo(res.data);console.log(res.data);}).catch(function(err){console.log(err);});};var fetchUserData=function fetchUserData(){axios.get(\"http://localhost:8000/mypage/\".concat(writer)).then(function(res){setWriter(res.data);var copy=_toConsumableArray(todo);copy.push(writer);setTodo(copy);console.log(res.data);}).catch(function(err){console.log(err);});};var deleteTodo=function deleteTodo(id,i){if(window.confirm('Ï†ïÎßê ÏÇ≠Ï†úÌï†ÍπåÏöî?')){axios.delete(\"http://localhost:8000/delete/\".concat(id)).then(function(res){var copy=_toConsumableArray(todo);copy.splice(i,1);setTodo(copy);alert('ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');console.log('res.data : '+res.data);}).catch(function(err){console.log(err);});}};var filteredTodo=todo.filter(function(current){return current.writer===writer;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"homeFont\",children:\" To Do List \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"listBox\",children:filteredTodo.map(function(a,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"listItem\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{whiteSpace:\"nowrap\"},children:a.title}),/*#__PURE__*/_jsx(\"span\",{children:a.date}),/*#__PURE__*/_jsx(\"span\",{children:a.writer})]}),/*#__PURE__*/_jsx(\"button\",{className:\"deleteButton\",\"data-id\":todo._id,onClick:function onClick(){var id=a._id;deleteTodo(id,i);},children:\" \\uD83D\\uDDD1\\uFE0F \"})]},i);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\"})})]});}export default Mypage;","map":{"version":3,"names":["Route","Routes","useNavigate","useParams","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Mypage","navigate","_useState","_useState2","_slicedToArray","writer","setWriter","_useState3","_useState4","todo","setTodo","fetchTodo","fetchUserData","get","then","res","data","console","log","catch","err","concat","copy","_toConsumableArray","push","deleteTodo","id","i","window","confirm","delete","splice","alert","filteredTodo","filter","current","children","className","map","a","type","style","whiteSpace","title","date","_id","onClick"],"sources":["/Users/jangyoungju/Desktop/webproject/homework/project/myreact/src/Components/Mypage.js"],"sourcesContent":["import { Route, Routes, useNavigate, useParams } from 'react-router-dom'\nimport { useState, useEffect } from 'react';\n\nimport axios from \"axios\"\n\nfunction Mypage() {\n\n    let navigate = useNavigate();\n    let [writer, setWriter] = useState([])\n    let [todo, setTodo] = useState([])\n    useEffect(() => {\n        fetchTodo()\n    }, [])\n    useEffect(() => {\n        fetchUserData()\n    }, [])\n\n    const fetchTodo = () => {\n        axios.get('http://localhost:8000/add')  \n            .then((res) => { \n                setTodo(res.data)\n                console.log(res.data)\n            })\n            .catch((err) => {\n                console.log(err)\n        })\n    }\n    const fetchUserData = () => {\n        axios.get(`http://localhost:8000/mypage/${writer}`)  \n            .then((res) => { \n                setWriter(res.data)\n                let copy = [...todo]\n                copy.push(writer)\n                setTodo(copy)\n                console.log(res.data)\n            })\n            .catch((err) => {\n                console.log(err)\n        })\n    }\n    const deleteTodo = (id, i) => {\n        if(window.confirm('Ï†ïÎßê ÏÇ≠Ï†úÌï†ÍπåÏöî?')) {\n            axios.delete(`http://localhost:8000/delete/${id}`)\n            .then((res) => { \n                let copy = [...todo]\n                copy.splice(i,1)\n                setTodo(copy)\n                alert('ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.')\n                console.log('res.data : ' + res.data)\n            })\n            .catch((err) => {\n                console.log(err)\n            })\n        }\n    }\n\n    const filteredTodo = todo.filter(current => current.writer === writer) \n    return (\n        \n        <div> \n            <div className='title'>\n                <h1 className='homeFont'> To Do List </h1>\n            </div>\n\n            <div className='container'>\n                <div className='listBox'>\n                    {\n                        filteredTodo.map((a, i) => {\n                            return (\n                                <div className='listItem' key={i}>\n                                    <input type='checkbox' />\n                                        <div>\n                                            <span style={{whiteSpace: \"nowrap\"}}>{a.title}</span>\n                                            <span>{a.date}</span>\n                                            <span>{a.writer}</span>\n                                        </div>\n                                    <button className='deleteButton' data-id={todo._id} onClick={() => {\n                                        var id = a._id\n                                        deleteTodo(id, i)\n                                    }} > üóëÔ∏è </button>  \n                                </div>\n                            )\n                        })\n                    }\n                   \n                </div>\n            </div>\n            <div className=\"container\">\n                <ul className=\"list-group\">\n                \n                    \n                </ul>\n            </div>\n        </div>\n    )\n}\n\n\nexport default Mypage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}